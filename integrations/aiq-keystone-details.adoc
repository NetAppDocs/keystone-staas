---
sidebar: sidebar
permalink: integrations/aiq-keystone-details.html
keywords: keystone-aiq, digital advisor keystone, keystone reports, alerts, keystone dashboard, keystone usage graphs charts, generate reports, iq sustainability, digital advisor sustainability, metrocluster, storagegrid, ontap, tracking id, burst usage, alerts
summary: Keystone and Digital Advisor
summary: Keystone Subscription reports and graphs
---

= Keystone Subscription dashboard and reporting
:hardbreaks:
:nofooter:
:icons: font
:linkattrs:
:imagesdir: ../media/

[.lead]
The Active IQ Digital Advisor (Digital Advisor) dashboard provides you with the capability of monitoring the usage pertaining to your NetApp Keystone subscriptions and generating reports. On subscribing to Keystone services, you can view the details of your subscription and usage on the *Keystone Subscriptions* widget on the Digital Advisor dashboard.

[NOTE]
The information available here applies to both ONTAP and StorageGRID. Exceptions have been pointed out in the relevant sections.

For information about the Keystone Digital Advisor widget, see https://docs.netapp.com/us-en/active-iq/view_keystone_capacity_utilization.html[View capacity utilization with NetApp Keystone Subscription^].

To view your Keystone subscription and usage details, perform the following steps:

.Steps

. Log in to Digital Advisor. You can see the *Keystone Subscriptions* widget that summarizes the capacity usage against your purchased Keystone services.
. On the *Keystone Subscriptions* widget, click *View More Details* to view the usage details and alerts on your volumes on the *Keystone Subscriptions* page. Alternately, from the left navigation pane, go to *GENERAL > Keystone Subscriptions*.
The details of the subscriptions, usage charts for each service level, and volume details are displayed in the different tabs on the *Keystone Subscriptions* screen.

[TIP]
For certain fields and columns, you might see information or warning icons and tooltips that provide you with additional information about the data.

[NOTE]
Capacity consumption in Keystone subscriptions is displayed in TiBs on the dashboards and reports, and is rounded off to two decimal places. If the usage is less than 0.01 TiB, then the value is shown as 0 or `No Usage`. For other usage metrics, see link:../concepts/metrics.html#metrics-measurement[Metrics measurement]. For information about different capacities used in Keystone, see link:../concepts/supported-storage-capacity.html[Supported storage capacities].

== View subscriptions
You can view a list of all your subscriptions in the *Subscriptions* tab. 

image:all-subs.png[an image of the Subscriptions tab]

For each subscription, you can see the following information:

* *Subscription Number*: The subscription number of the Keystone subscription assigned by NetApp.
* *Tracking ID*: The tracking ID assigned at the time of subscription activation. This is a unique ID for each subscription and site, used for tracking the subscription.
[TIP]
If you have subscribed to advanced data protection add-on service, then you can click the tooltip against your subscription number to view the tracking ID of the partner subscription in a MetroCluster setup. To know how to view detailed consumption by partner subscriptions in a MetroCluster configuration, see link:../integrations/aiq-keystone-details.html#additional-details-for-advanced-data-protection[Additional details for advanced data protection].
* *Usage Type*: You might have subscribed to multiple Keystone (version 1) or Keystone STaaS (version 2) subscriptions. The rate plan rules for the service levels might vary for the two subscription types. By looking at the value in this column, you know whether the usage type is billed as per the provisioned or logical usage for either `v1` or `v2`. For more information about Keystone Subscriptions version 1, see https://docs.netapp.com/us-en/keystone/index.html[Documentation for NetApp Keystone].
* *Billing Period*: The billing period of the subscription, such as monthly, quarterly, or yearly.
* *Start Date*: The start date of the subscription.
* *End Date*: The end date of the subscription. An empty date field indicates that the subscription has no end date, and it gets renewed automatically. Based on this date, you might see notifications for subscriptions that are about to end or have auto-renewal policies attached.
* *Usage Status*: Displays the usage indicator to indicate whether the consumption is within or exceeding the subscription limit. You can sort the list by this column if you want to view the highest consumption records.
* image:subs-dtls-icon.png[icon]: Clicking this icon for a subscription opens the *Current Usage* tab with the usage details of that subscription.
* image:aiq-ks-time-icon.png[icon]: Clicking this icon opens the *Capacity Trend* tab where you can see the historical usage data for each service level included in this subscription.

You can refer to the following usage indicators to check the usage status of each subscription:

image:usage-indicator.png[icon]

.Index

image:icon-grey.png[grey dot icon]: No capacity usage recorded against the committed capacity of the service level
image:icon-green.png[green dot icon]: The consumption is normal, within 80% of the committed capacity
image:icon-amber.png[amber dot icon]: Maximum consumption, that is the usage is about to reach 100% or more of the committed capacity. The *Consumed* column displays this indicator for any consumption above 80% of the committed capacity
image:icon-red.png[red dot icon]: The consumption is within the burst limit. The burst consumption is the consumption that tops the 100% committed capacity of a service level, and is within the agreed-upon burst usage limit, such as 120%
image:icon-purple.png[purple dot icon]: Indicates consumption above the stipulated burst limit

== View usage details for your subscriptions
To know the usage details of your subscriptions, click the *Current Usage* tab, and select the required subscription number.

image:aiq-ks-dtls.png[Current Usage tab]

Details, such as the service level name, committed, consumed, available capacities, and current and accrued burst usage are displayed in TiB.

[TIP]
The image:icon-info.png[information icon] icon next to each column provides comprehensive information about that column. Specific service levels that record higher consumption are highlighted. You can also view warnings and alerts generated for your volumes.

For information about your Keystone storage services and the relevant service levels, see link:../concepts/service-levels.html[Service Levels in Keystone].

== View sustainability SLA details
.Learn more
[%collapsible]
====
The *SLA Details* tab is available only if you have a valid sustainability service level agreement (SLA) with NetApp. For information about sustainability SLA in Keystone STaaS, see link:../concepts/sla-sustainability.html[Sustainability SLA for Keystone].

The *SLA Details* tab provides you with the sustainability SLA details.

.Steps
. Click the *SLA Details* tab.
. Select the required subscription for which you want to view the details. You can view only those subscriptions that meet the criteria for sustainability SLA. For information about the criteria, see link:../concepts/sla-sustainability.html#eligibility-criteria-for-sustainability-sla[Eligibility criteria for sustainability SLA].
. Select the year and month for which you want to view the details. You can select the year and month during which the subscription has been active.

You can see a daily breakdown of measured sustainability-related metrics for the selected month:

image:sla-sustainability.png[sla details tab listing sustainability details]

The following details are displayed:

* *Average Sustainability*: The average power consumed in watts/TiB over the last billing period of this subscription.
* *Date*: The date of the collected SLA data.
* *Average Watts*: The average watts of power consumed that day by the cluster.
* *Effective Capacity (TiB*): The sum of the committed capacity and the allocated burst capacity for the service level.
* *Actual Watts (TiB*): The actual watts/TiB is the actual power consumption per TiB for that day by the cluster. You can compare it against the value in *SLA Watts/TiB* to analyze any overshoot.
* *SLA Watts/TiB*: The watts/TiB value for the service level defined in the SLA.
* *Average Temperature (^o^C)*: The average ambient temperature for the day.
* *Storage Efficiency Ratio*: The storage efficiency ratio in the Keystone storage environment. This is the ratio of the total logical space used by the system after enabling the storage efficiency settings to the total physical space used to store the data. For information about storage efficiency ratio, see https://docs.netapp.com/us-en/active-iq/concept_overview_storage_efficiency.html[Understand storage efficiency^].

If there is an SLA breach, an icon image:warning.png[icon for warning] adjacent to the column informs you of the nature of the breach. The following warnings are displayed:

* Ambient temperature: If the temperature is outside of the range of 25^o^C - 27^o^C.
* SLA Watts/TiB: If the service level SLA metrics are not met. For information, see link:../concepts/sla-sustainability.html#sustainability-service-level[Sustainability service level].
* Storage efficiency ratio: If the storage efficiency is less than 2:1.


====


== View historical usage data
The *Capacity Trend* tab displays historical data of your subscriptions for a specific period. The vertical graphs display the usage details for the selected time range with appropriate indicators for you to compare and generate reports. 

.Steps
. Click the *Capacity Trend* tab.
. Select the required subscription for which you want to view the details. The first subscription in your account name is selected by default.
. Select the time range from the calendar icons in the *From Date* and *To Date* fields. The default time range is from the start date of the billing period to the current date.
+
[NOTE]
For optimal performance and user experience, limit the date range of your query to three months or less.
+
. Click *View Details*. The historical consumption data of the subscription for each service level is displayed based on the selected time range. You can hover your mouse cursor over the charts to view the usage breakdown in terms of committed, consumed, burst, and above the burst limit data at that point.

image:aiq-ks-subtime-2.png[Capacity Trend tab]

The following details are displayed:

* Current Usage: The start and end date of the subscription, and the billing period, for example, quarterly, yearly, and so forth.
* Usage charts: The bar charts display the service level name and the capacity consumed against that service level for the date range. The date and time of the collection are displayed at the bottom of the chart.
+
[NOTE]
Based on the date range of your query, the usage charts are displayed in a range of 30 data collection points.
+
The following colors in the bar charts indicate the consumed capacity as defined within the service level:

** Green: Within 80%.
** Amber: 80% - 100%.
** Red: Burst usage (100% of the committed capacity to the agreed burst limit)
** Purple: Above the burst limit or `Above Limit`.
+
[NOTE]
A blank chart indicates that there was no data available in your environment at that data collection point.
+
* *Current Consumed*: Indicator for the consumed capacity (in TiB) defined for the service level. This field uses specific colors for usage:
** Grey: None.
** Green: Within 80% of the committed capacity.
** Amber: Any consumption above 80% of the committed capacity.
* *Current Burst*: Indicator for the consumed capacity within or above the defined burst limit. Any usage within the burst limit agreed upon, for example, 20% above the committed capacity is within the burst limit. Further usage is considered as usage above the burst limit. This field uses specific colors for usage:
** Grey: None.
** Red: Burst.
** Purple: Above the burst limit.
* *Accrued Burst*: Indicator for the accrued burst usage or consumed capacity calculated per month for the current billing period. The accrued burst usage is calculated based on the committed and consumed capacity for a service level: `(consumed - committed)/365.25/12`.
+
[NOTE]
The *Current Consumed*, *Current Burst*, and *Accrued Burst* indicators determine the consumption with respect to the billing period of the subscription, and are not based on the date range of the query.

=== Additional details for advanced data protection 
.Learn more
[%collapsible]
====
If you have subscribed to the advanced data protection add-on service, you can view the breakup of the consumption data for the MetroCluster partner sites on the *Capacity Trend* tab. 

For information about advanced data protection add-on service, see link:../concepts/adp.html[Advanced data protection].

If the clusters in your ONTAP storage environment are configured in a MetroCluster setup, the consumption data of your Keystone subscription is split in the same historical data chart to display the consumption at the primary and mirror sites for the base service levels.

[NOTE]
The consumption bar charts are split for only the base service levels. For advanced data protection add-on service, that is the _Advanced Data-Protect_ service level, this demarcation does not appear.

.Advanced data protection service level

For the _Advanced Data-Protect_ service level, the total consumption is split between the partner sites, and the usage at each partner site is reflected and billed in a separate subscription; one subscription for the primary site, and another for the mirror site. That is the reason why, when you select the subscription number for the primary site on the *Capacity Trend* tab, the consumption charts for the advanced data protection add-on service display the discrete consumption details of only the primary site. Because each partner site in a MetroCluster configuration acts both as a source and mirror, the total consumption at each site includes the source and the mirror volumes created at that site.

[TIP]
The tooltip next to the tracking ID of your subscription in the *Current Usage* tab helps you identify the partner subscription in the MetroCluster setup.

.Base service levels

For the base service levels, each volume is charged as provisioned at the primary and mirror sites, and hence the same bar chart is split according to the consumption at the primary and mirror sites.

.What you can see for the primary subscription

The following image displays the charts for the _Extreme_ service level (base service level) and a primary subscription number. The same historical data chart also indicates the mirror site consumption in a lighter shade of the same color code used for the primary site. The tooltip on mouse hover displays the consumption breakup (in TiB) for the primary and mirror sites, 1.02 TiB and 1.05 TiB respectively.

image:mcc-chart.png[mcc primary]

For the _Advanced Data-Protect_ service level, the charts appear like this:

image:adp-src.png[mcc primary base]

.What you can see for the secondary (mirror site) subscription

When you check the secondary subscription, you can see that the bar chart for the _Extreme_ service level (base service leverent Usagel) at the same data collection point as the partner site is reversed, and the consumption breakup at the primary and mirror sites is 1.05 TiB and 1.02 TiB respectively.

image:mcc-chart-mirror.png[mcc mirror]

For the _Advanced Data-Protect_ service level, the chart appears like this for the same collection point as at the partner site:

image:adp-mir.png[mcc mirror base]

For information about how MetroCluster protects your data, see https://docs.netapp.com/us-en/ontap-metrocluster/manage/concept_understanding_mcc_data_protection_and_disaster_recovery.html[Understanding MetroCluster data protection and disaster recovery^].

====

== View volumes and objects details
On the *Volumes & Objects* tab, you can view the consumption and other details for your volumes in ONTAP. For StorageGRID, this tab displays the nodes and their individual usage in your object storage environment.

[NOTE]
The name of this tab varies with the nature of deployment at your site. If you have both volumes and object storage, you can see the *Volumes & Objects* tab. If you have only ONTAP volumes in your storage environment, the name changes to *Volumes*. For StorageGRID object storage, you can see the *Objects* tab.

=== ONTAP volume details
.Learn more
[%collapsible]
====
For ONTAP, the *Volumes* tab displays information, such as the capacity usage, volume type, cluster, aggregate, and service level of the volumes in your storage environment managed by your Keystone subscription.


.Steps

. Click the *Volumes* tab.
. Select the subscription number. By default, the first available subscription number is selected. 
+
The volume details are displayed. You can scroll across the columns and learn more about them by hovering your mouse on the information icons beside the column headings. You can sort by the columns and filter the lists to view specific information.
+
[NOTE]
For advanced data protection add-on service, an additional column appears to indicate whether the volume is a primary or mirror volume in the MetroCluster configuration. You can copy individual node serial numbers by clicking the *Copy Node Serials* button. 

image:aiq-ks-sysdtls.png[Volumes & Objects tab]


==== 

=== StorageGRID nodes and consumption details
.Learn more
[%collapsible]
====
For StorageGRID, this tab displays the physical usage for the nodes in the object storage environment.

.Steps

. Click the *Objects* tab.
. Select the subscription number. By default, the first available subscription number is selected. On selecting the subscription number, the link for object storage details is enabled.
+
image:sg-link.png[StorageGRID pop-up]
+
. Click the link to view the node names and physical usage details for each node.
+
image:sg-link-2.png[StorageGRID pop-up]


====

== Generate reports
You can generate and view reports for your subscription details, historical usage data for a time range, and volume details from each of the tabs by clicking the download button: image:download-icon.png[report download icon]

The details are generated in CSV format that you can save for future use.

A sample report for the *Capacity Trend* tab, where the graphical data is converted:

image:report.png[csv of report]

== View alerts
Alerts on the dashboard send caution messages that enable you to understand the issues occurring in your storage environment. 

The alerts can be of two types:

* *Information*: For issues, such as your subscriptions nearing an end, you can see information alerts. Hover your cursor over the information icon to learn more about the issue.
* *Warning*: Issues, such as non-compliance, are displayed as warnings. For example, if there are volumes within your managed clusters that do not have adaptive QoS (AQoS) policies attached, you can see a warning message. You can click the link on the warning message to see the list of the non-compliant volumes in the *Volumes* tab.
[NOTE]
If you have subscribed to a single service level or rate plan, you won't be able to see the alert for non-compliant volumes.
+
For information about AQoS policies, see link:../concepts/qos.html[Adaptive QoS].

image:alert-aiq.png[alert]

Contact NetApp support for more information on these caution and warning messages. For information about raising service requests, see link:../concepts/gssc.html#generating-service-requests[Generating service requests].