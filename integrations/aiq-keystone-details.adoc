---
sidebar: sidebar
permalink: integrations/aiq-keystone-details.html
keywords: keystone-aiq, digital advisor keystone, keystone reports, alerts, keystone dashboard, keystone usage graphs charts, generate reports
summary: Keystone Subscription reports and graphs
---

= Keystone Subscription dashboard and reporting
:hardbreaks:
:nofooter:
:icons: font
:linkattrs:
:imagesdir: ../media/

[.lead]
The Active IQ Digital Advisor (Digital Advisor) dashboard provides you with the capability of monitoring the usage pertaining to your NetApp Keystone subscriptions and generating reports. On subscribing to Keystone services, you can view the details of your subscription and usage on the *Keystone Subscriptions* widget on the Digital Advisor dashboard.

[NOTE]
The information available here applies to both ONTAP and StorageGRID. Exceptions have been pointed out in the relevant sections.

For information about the Keystone Digital Advisor widget, see https://docs.netapp.com/us-en/active-iq/view_keystone_capacity_utilization.html[View capacity utilization with NetApp Keystone Subscription^].

To view the details, perform the following steps:

.Steps

. On Digital Advisor, click *View More Details* on the widget to view the usage details and alerts on your volumes on the *Keystone Subscriptions* page. Alternately, from the left navigation pane, go to *GENERAL > Keystone Subscriptions*.

The details of the subscriptions, usage charts for each service level, and volume details are displayed in the different tabs on the *Keystone Subscriptions* screen.

[NOTE]
Capacity consumption in Keystone subscriptions is displayed in TiBs on the dashboards and reports, and is rounded off to two decimal places. If the usage is less than 0.01 TiB, then the value is shown as 0 or `No Usage`. For other usage metrics, see link:../concepts/metrics.html#metrics-measurement[Metrics measurement]. For information about different capacities used in Keystone, see link:../concepts/supported-storage-capacity.html[Supported storage capacities].

== View subscription details
You can view all the subscriptions for an account name in the *Subscription Details* tab.

image:aiq-ks-dtls.png[subscription details tab]

For each subscription number, you can see the following information:

* *Subscription Number*: The subscription number of the Keystone subscription assigned by NetApp.
* *Tracking ID*: The tracking ID assigned at the time of subscription activation. This is a unique ID for each subscription and site, used for tracking the subscription.
[TIP]
If you have subscribed to advanced data protection add-on service, then you can click the tooltip against your subscription number to view the tracking ID of the partner subscription in a MetroCluster setup. To know how to view detailed consumption by partner subscriptions in a MetroCluster configuration, see link:../integrations/aiq-keystone-details.html#additional-details-for-advanced-data-protection[Additional details for advanced data protection].
* *Usage Type*: You might have subscribed to multiple Keystone (version 1) or Keystone STaaS (version 2) subscriptions. The rate plan rules for the service levels might vary for the two subscription types. By looking at the value in this column, you know whether the usage type is billed as per the provisioned or logical usage for either `v1` or `v2`. For more information about Keystone Subscriptions version 1, see https://docs.netapp.com/us-en/keystone/index.html[Documentation for NetApp Keystone].
* *Billing Period*: The billing period of the subscription, such as monthly, quarterly, or annual.
* *Start Date*: The start date of the subscription.
* *End date*: The end date of the subscription. A blank date indicates that the subscription has no end date, and it gets renewed automatically. Based on this date, you might see information messages for subscriptions that are nearing expiry or have auto-renewal policies attached.
* *Usage Status*: Indicates how much of the subscription has been used or overused. You can sort the list by this column if you want to view the highest consumption records.
* image:aiq-ks-time-icon.png[icon]: Clicking this icon opens the *Subscription Time Series* tab where you can see the historical usage data for each service level included in this subscription

You can see more details by clicking the downward arrow for a subscription record. Details, such as the service level name, committed, consumed, available capacities, and current and accrued burst usage are displayed in TiB.

[TIP]
Specific service levels that record higher consumption are highlighted. You can also view warnings and alerts generated for your volumes.

For information about your Keystone storage services and the relevant service levels, see link:../concepts/service-levels.html[Service Levels in Keystone].

You can refer to the following usage indicators to check the usage status of each subscription:

image:usage-indicator.png[icon]

.Index

image:icon-grey.png[grey dot icon]: No capacity usage recorded against the committed capacity of the service level
image:icon-green.png[green dot icon]: The consumption is normal, within 80% of the committed capacity
image:icon-amber.png[amber dot icon]: Maximum consumption, that is the usage is about to reach 100% or more of the committed capacity. The *Consumed* column displays this indicator for any consumption above 80% of the committed capacity
image:icon-red.png[red dot icon]: The consumption is within the burst limit. The burst consumption is the consumption that tops the 100% committed capacity of a service level, and is within the agreed-upon burst usage limit, such as 120%
image:icon-purple.png[purple dot icon]: Indicates consumption above the stipulated burst limit

== View historical subscription data charts
The *Subscription Time Series* tab displays historical data of your subscriptions for a specific period. The vertical graphs display the usage details for the selected time range with appropriate indicators for you to compare and generate reports. 

.Steps
. Click the *Subscription Time Series* tab.
. Select the required subscription for which you want to view the details. The first subscription in your account name is selected by default.
. Select the time range from the calendar icons in the *From Date* and *To Date* fields. The default time range is from the start date of the billing period to the current date.
+
[NOTE]
For optimal performance and user experience, limit the date range of your query to three months or less.
+
. Click *View Details*. The historical consumption data of the subscription for each service level is displayed based on the selected time range. You can hover your mouse cursor over the charts to view the usage breakdown in terms of committed, consumed, burst, and above the burst limit data at that point.

image:aiq-ks-subtime-2.png[time series tab]

The following details are displayed:

* *Subscription details*: The start and end date of the subscription, and the billing period, for example, quarterly, yearly, and so forth.
* *Usage charts*: The bar charts display the service level name and the capacity consumed against that service level for the date range. The date and time of the collection are displayed at the bottom of the chart.
+
[NOTE]
Based on the date range of your query, the usage charts are displayed in a range of 30 data collection points.
+
The following colors in the bar charts indicate the consumed capacity as defined within the service level:

** Green: Within 80%.
** Amber: 80% - 100%.
** Red: Burst usage (100% of the committed capacity to the agreed burst limit)
** Purple: Above the burst limit or `Above Limit`.
+
[NOTE]
A blank chart indicates that there was no data available in your environment at that data collection point.
+
* *Current Consumed*: Indicator for the consumed capacity (in TiB) defined for the service level. This field uses specific colors for usage:
** Grey: None.
** Green: Within 80% of the committed capacity.
** Amber: Any consumption above 80% of the committed capacity.
* *Current Burst*: Indicator for the consumed capacity within or above the defined burst limit. Any usage within the burst limit agreed upon, for example, 20% above the committed capacity is within the burst limit. Further usage is considered as usage above the burst limit. This field uses specific colors for usage:
** Grey: None.
** Red: Burst.
** Purple: Above the burst limit.
* *Accrued Burst*: Indicator for the accrued burst usage or consumed capacity calculated per month for the current billing period. The accrued burst usage is calculated based on the committed and consumed capacity for a service level: `(consumed - committed)/365.25/12`.
+
[NOTE]
The *Current Consumed*, *Current Burst*, and *Accrued Burst* indicators determine the consumption with respect to the billing period of the subscription, and are not based on the date range of the query.

=== Additional details for advanced data protection 
.Click here
[%collapsible]
====
If you have subscribed to the advanced data protection add-on service, you can view the breakup of the consumption data for the MetroCluster partner sites on the *Subscription Time Series* tab. 

For information about advanced data protection add-on service, see link:../concepts/adp.html[Advanced data protection].

If the clusters in your ONTAP storage environment are configured in a MetroCluster setup, the consumption data of your Keystone subscription is split in the same time series chart to display the consumption at the primary and mirror sites for the base service levels.

[NOTE]
The consumption bar charts are split for only base service levels. For the _Advanced Data-Protect_ service level, this demarcation does not appear.

.Advanced data protection service level

For the _Advanced Data-Protect_ service level, the total consumption is split between the partner sites, and the usage at each partner site is reflected and billed in a separate subscription; that is one subscription for the primary site, and another for the mirror site. That is why, when you select the subscription number for the primary site on the *Subscription Time Series* tab, the consumption charts for the advanced data protection add-on service display the discrete consumption details for only the primary site. Because each partner site in a MetroCluster configuration acts as a source and a mirror, the total consumption at each site includes the source and the mirror volumes created at that site.

[TIP]
The tooltip beside the tacking ID of your subscription in the *Subscription Details* tab helps you identify the partner subscription in the MetroCluster setup.

.Base service levels

For the base service levels, each volumes is charged as provisioned at the primary and mirror sites, and hence the same bar chart is split according to the consumption at the primary and mirror sites.

.What you can see for the primary subscription

The following image displays the charts for the _Extreme_ service level (base service level) and a primary subscription number. The same time series chart marks off the mirror site consumption in a lighter shade of the color code used for the primary site. The tool-tip on mouse hover displays the consumption breakup (in TiB) for the primary and mirror sites, 1.02 TiB and 1.05 TiB respectively.

image:mcc-chart.png[mcc primary]

For the _Advanced Data-Protect_ service level  (service level for advanced data protection add-on service), the charts appear like this:

image:adp-src.png[mcc primary base]

.What you can see for the secondary (mirror site) subscription

When you check the secondary subscription, you can see that the bar chart for the _Extreme_ service level (base service level) at the same data collection point is reversed, and the consumption breakup at the primary and mirror sites is 1.05 TiB and 1.02 TiB respectively.

image:mcc-chart-mirror.png[mcc mirror]

For the _Advanced Data-Protect_ service level (service level for advanced data protection add-on service), the chart appears like this at the same collection point:

image:adp-mir.png[mcc mirror base]

For information about how MetroCluster protects your data, see https://docs.netapp.com/us-en/ontap-metrocluster/manage/concept_understanding_mcc_data_protection_and_disaster_recovery.html[Understanding MetroCluster data protection and disaster recovery^].

====

== View system details
On the *System Details* tab, you can view the consumption and other details for your volumes in ONTAP. For StorageGRID, this tab displays the nodes and their individual usage in your object storage environment.

=== ONTAP volume details 
.Click here
[%collapsible]
====
For ONTAP, the *System Details* tab displays information, such as the capacity usage, volume type, cluster, aggregate, and service level of the volumes in your storage environment managed by your Keystone subscription.

.Steps

. Click the *System Details* tab.
. Select the subscription number. By default, the first available subscription number is selected. 
+
The volume details are displayed. You can scroll across the columns and learn more about them by hovering your mouse on the information icons beside the column headings. You can sort by the columns and filter the lists to view specific information.
+
[NOTE]
For data protection services, an additional column appears to indicate whether the volume is a primary or mirror volume in the MetroCluster configuration. You can copy individual node serial numbers by clicking the *Copy Node Serials* button. 

image:aiq-ks-sysdtls.png[system details tab]


==== 

=== StorageGRID nodes and consumption details
.Click here
[%collapsible]
====
For StorageGRID, this tab displays the physical usage for the nodes in the object storage environment.

.Steps

. Click the *System Details* tab.
. Select the subscription number. By default, the first available subscription number is selected. On selecting the subscription number, the link for object storage details is enabled.
+
image:sg-link.png[StorageGRID pop-up]
+
. Click the link to view the node names and physical usage details for each node.
+
image:sg-link-2.png[StorageGRID pop-up]


====

== Generate reports
You can generate and view reports for your subscription details, historical usage data for a time range, and system details from each of the tabs by clicking the download button: image:download-icon.png[report download icon]

The details are generated in CSV format that you can save for future use.

A sample report for the *Subscription Time Series* tab, where the graphical data is converted:

image:report.png[csv of report]

== View alerts
Alerts on the dashboard send caution messages that enable you to understand the issues occurring in your storage environment. 

The alerts can be of two types:

* *Information*: For issues, such as your subscriptions nearing an end, you can see information alerts. Hover your cursor over the information icon to learn more about the issue.
* *Warning*: Issues, such as non-compliance, are displayed as warnings. For example, if there are volumes within your managed clusters that do not have adaptive QoS (AQoS) policies attached, you can see a warning message. You can click the link on the warning message to see the list of the non-compliant volumes in the *System Details* tab.
[NOTE]
If you have subscribed to a single service level or rate plan, you won't be able to see the alert for non-compliant volumes.
+
For information about AQoS policies, see link:../concepts/qos.html[Adaptive QoS].

image:alert-aiq.png[alert]

Contact NetApp support for more information on these caution and warning messages. For information about raising service requests, see link:../concepts/gssc.html#generating-service-requests[Generating service requests].