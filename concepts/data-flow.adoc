---
sidebar: sidebar
permalink: concepts/data-flow.html
keywords: data flow
summary: Keystone data flows
---

= Keystone data flow
:hardbreaks:
:nofooter:
:icons: font
:linkattrs:
:imagesdir: ../media/

[.lead]
Keystone STaaS systems encounter data flow through Keystone Collector traffic and monitoring data flows.

== Keystone Collector data flow
Keystone Collector initiates REST API calls to the storage controllers and obtains usage details of the controllers periodically.

image:collector-data-flow.png[]

.Legend

. NetApp Collector initiates an HTTPS session to the Active-IQ cloud portal.
. The firewall operated by the customer allows the connection.
. The Active IQ Cloud portal accepts the connection and establishes a tunnel to the NetApp Collector.
. The NetApp collector establishes a REST API session to the management connection of the storage controller, obtains the environmental data, and sends it to the Active IQ portal.

== Monitoring data flows

Monitoring the health of the storage infrastructure continuously is one of the most important features of Keystone service. For monitoring, Keystone uses AIOPs solution, which needs remote access to customer's network. The following image describes how remote access to the customer location is secured by the AIOPs solution tool.

image:monitoring-flow.png[]

.Legend

. The AIOPs solution gateway initiates a TLS session to the its cloud portal.
. The firewall operated by the customer allows the connection.
. The AIOPs solution server in the cloud accepts the connection.
. A TLS tunnel is established between the cloud portal and the local gateway.
. The NetApp controllers send alerts using SNMP protocol or respond to API requests to the local gateway.
. The local gateway sends these alerts to its cloud portal using the TLS session, which was established before.
